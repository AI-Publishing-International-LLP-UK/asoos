{
  "metadata": {
    "testSuite": "SallyPort-Cloudflare E2E Routing Tests",
    "timestamp": "2025-07-03T03:04:40.180Z",
    "environment": "development"
  },
  "summary": {
    "totalTests": 14,
    "passedTests": 6,
    "failedTests": 8,
    "successRate": 42.857142857142854,
    "duration": 18856,
    "results": [
      {
        "testName": "Public Domain Access",
        "passed": true,
        "details": "Main domain accessible",
        "responseTime": 1082,
        "timestamp": "2025-07-03T03:04:22.409Z"
      },
      {
        "testName": "Cloudflare Header Validation (No CF Headers)",
        "passed": false,
        "details": "Expected 403/401, got 200",
        "responseTime": 1359,
        "timestamp": "2025-07-03T03:04:23.769Z"
      },
      {
        "testName": "Cloudflare Header Validation (With CF Headers)",
        "passed": true,
        "details": "CF headers accepted, proceeded to auth",
        "responseTime": 3052,
        "timestamp": "2025-07-03T03:04:26.822Z"
      },
      {
        "testName": "SallyPort Auth (No Token)",
        "passed": false,
        "details": "Expected 401/403, got 200",
        "responseTime": 2147,
        "timestamp": "2025-07-03T03:04:28.970Z"
      },
      {
        "testName": "SallyPort Auth (Invalid Token)",
        "passed": false,
        "details": "Expected 401/403, got 200",
        "responseTime": 1452,
        "timestamp": "2025-07-03T03:04:30.422Z"
      },
      {
        "testName": "Protected Endpoint Access: /sallyport/api/agents/list",
        "passed": false,
        "details": "Expected 401/403, got 200",
        "responseTime": 3574,
        "timestamp": "2025-07-03T03:04:33.997Z"
      },
      {
        "testName": "Protected Endpoint Access: /sallyport/api/admin/users",
        "passed": false,
        "details": "Expected 401/403, got 200",
        "responseTime": 1493,
        "timestamp": "2025-07-03T03:04:35.490Z"
      },
      {
        "testName": "Protected Endpoint Access: /sallyport/api/wing/squadrons",
        "passed": false,
        "details": "Expected 401/403, got 200",
        "responseTime": 984,
        "timestamp": "2025-07-03T03:04:36.474Z"
      },
      {
        "testName": "Protected Endpoint Access: /sallyport/api/private/config",
        "passed": false,
        "details": "Expected 401/403, got 200",
        "responseTime": 1278,
        "timestamp": "2025-07-03T03:04:37.753Z"
      },
      {
        "testName": "Security Header: x-frame-options",
        "passed": true,
        "details": "Present: DENY",
        "responseTime": 1143,
        "timestamp": "2025-07-03T03:04:38.896Z"
      },
      {
        "testName": "Security Header: x-content-type-options",
        "passed": true,
        "details": "Present: nosniff",
        "responseTime": 1143,
        "timestamp": "2025-07-03T03:04:38.896Z"
      },
      {
        "testName": "Security Header: x-xss-protection",
        "passed": false,
        "details": "Missing",
        "responseTime": 1143,
        "timestamp": "2025-07-03T03:04:38.896Z"
      },
      {
        "testName": "Security Header: strict-transport-security",
        "passed": true,
        "details": "Present: max-age=31556926",
        "responseTime": 1143,
        "timestamp": "2025-07-03T03:04:38.896Z"
      },
      {
        "testName": "Audit Logging Trigger",
        "passed": true,
        "details": "Request logged with status 200",
        "responseTime": 1281,
        "timestamp": "2025-07-03T03:04:40.178Z"
      }
    ]
  },
  "detailedResults": [
    {
      "testName": "Public Domain Access",
      "passed": true,
      "details": "Main domain accessible",
      "responseTime": 1082,
      "timestamp": "2025-07-03T03:04:22.409Z"
    },
    {
      "testName": "Cloudflare Header Validation (No CF Headers)",
      "passed": false,
      "details": "Expected 403/401, got 200",
      "responseTime": 1359,
      "timestamp": "2025-07-03T03:04:23.769Z"
    },
    {
      "testName": "Cloudflare Header Validation (With CF Headers)",
      "passed": true,
      "details": "CF headers accepted, proceeded to auth",
      "responseTime": 3052,
      "timestamp": "2025-07-03T03:04:26.822Z"
    },
    {
      "testName": "SallyPort Auth (No Token)",
      "passed": false,
      "details": "Expected 401/403, got 200",
      "responseTime": 2147,
      "timestamp": "2025-07-03T03:04:28.970Z"
    },
    {
      "testName": "SallyPort Auth (Invalid Token)",
      "passed": false,
      "details": "Expected 401/403, got 200",
      "responseTime": 1452,
      "timestamp": "2025-07-03T03:04:30.422Z"
    },
    {
      "testName": "Protected Endpoint Access: /sallyport/api/agents/list",
      "passed": false,
      "details": "Expected 401/403, got 200",
      "responseTime": 3574,
      "timestamp": "2025-07-03T03:04:33.997Z"
    },
    {
      "testName": "Protected Endpoint Access: /sallyport/api/admin/users",
      "passed": false,
      "details": "Expected 401/403, got 200",
      "responseTime": 1493,
      "timestamp": "2025-07-03T03:04:35.490Z"
    },
    {
      "testName": "Protected Endpoint Access: /sallyport/api/wing/squadrons",
      "passed": false,
      "details": "Expected 401/403, got 200",
      "responseTime": 984,
      "timestamp": "2025-07-03T03:04:36.474Z"
    },
    {
      "testName": "Protected Endpoint Access: /sallyport/api/private/config",
      "passed": false,
      "details": "Expected 401/403, got 200",
      "responseTime": 1278,
      "timestamp": "2025-07-03T03:04:37.753Z"
    },
    {
      "testName": "Security Header: x-frame-options",
      "passed": true,
      "details": "Present: DENY",
      "responseTime": 1143,
      "timestamp": "2025-07-03T03:04:38.896Z"
    },
    {
      "testName": "Security Header: x-content-type-options",
      "passed": true,
      "details": "Present: nosniff",
      "responseTime": 1143,
      "timestamp": "2025-07-03T03:04:38.896Z"
    },
    {
      "testName": "Security Header: x-xss-protection",
      "passed": false,
      "details": "Missing",
      "responseTime": 1143,
      "timestamp": "2025-07-03T03:04:38.896Z"
    },
    {
      "testName": "Security Header: strict-transport-security",
      "passed": true,
      "details": "Present: max-age=31556926",
      "responseTime": 1143,
      "timestamp": "2025-07-03T03:04:38.896Z"
    },
    {
      "testName": "Audit Logging Trigger",
      "passed": true,
      "details": "Request logged with status 200",
      "responseTime": 1281,
      "timestamp": "2025-07-03T03:04:40.178Z"
    }
  ]
}
